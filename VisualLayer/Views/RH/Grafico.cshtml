@{
    ViewData["Title"] = "Home Page";
}

<link rel="stylesheet" href="~/css/Funcionario/grafico.css">
<div class="conteudo">
    <div class="top">
        <h1>Resultado SF-36</h1>
    </div>

    <div class="grafico">
        <div class="gridColuna" id="gridColuna">
            @*<div class="coluna">
            <div class="tituloColuna">Meu Titulo</div>
            <div class="colunaPorcentagem">
            <div class="porcentagem"></div>
            </div>
            <div class="bolinha">
            <span class="porcentagemTitulo">90%</span>
            </div>*@
        </div>
    </div>
</div>

<div class="rodape">
</div>


@section Scripts
    {
    <script>
        var objetoGrafico = new Object();

        objetoGrafico.CarregaGrafico = function () {
            $("#gridColuna").html("");

            $.ajax(
                {
                    type: 'GET',
                    timeout: 5000,
                    url: '/Rh/CarregaGrafico/id?='+@ViewBag.ID,
                    async: true,

                    success: function (jsonResult) {
                        jsonResult.dados.forEach(function (item) {
                            var coluna = $("<div>", { class: "coluna" });
                            var tituloColuna = $("<div>", { class: "tituloColuna" });
                            tituloColuna.text(item.tituloRodape);

                            var colunaPorcentagem = $("<div>", { class: "colunaPorcentagem" });
                            var porcentagem = $("<div>", { class: "porcentagem", style: "height: " + item.porcentagem });
                            colunaPorcentagem.append(porcentagem);

                            var bolinha = $("<div>", { class: "bolinha" });
                            var porcentagemTitulo = $("<span>", { class: "porcentagemTitulo" });
                            porcentagemTitulo.text(item.porcentagem);

                            bolinha.append(porcentagemTitulo);

                            coluna.append(tituloColuna);
                            coluna.append(colunaPorcentagem);
                            coluna.append(bolinha);

                            $("#gridColuna").append(coluna);
                        });
                    }
                });
        }

        $(function () {
            objetoGrafico.CarregaGrafico();
        });
    </script>
    <script src="~/js/grafico.js"></script>
}